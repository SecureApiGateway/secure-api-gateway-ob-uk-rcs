#
# Deployment Specific configuration
#
# The following section is a template of the mandatory configuration that needs to be supplied in order to start the
# application, this config is deployment specific.
#
# Consent Repo Configuration
#consent:
#  repo:
#    # Connection string to the Consent Repo base URI
#    uri:
#
# Resource Server Configuration
#rs:
#  api:
#    # Connection string to the RS API base URI
#    uri:
#
# RCS Consent signing configuration
# See: com.forgerock.sapi.gateway.ob.uk.rcs.server.configuration.RcsApplicationConfiguration.rcsJwtSigner
#
#rcs:
#  consent:
#    response:
#      jwt:
#        # kid value to use in the header of JWS produced by this app
#        signingKeyId:
#        # path to the private key, this is expected to be a PEM file
#        privateKeyPath:
#        # iss value to specify in the claims of JWS produced by this app
#        issuer:
#        # Algo used to sign the JWS
#        signingAlgorithm: PS256
#

logging:
  level:
    com.forgerock: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: health, info, prometheus

# Configuration for API Provider information
# API provider is the organization that exposes the Open Banking API capabilities to be consumed by TPPs (usually a Bank)
# See: com.forgerock.sapi.gateway.ob.uk.rcs.server.configuration.ApiProviderConfiguration
api:
  provider:
    # Name used in ConsentDetails, this gets displayed in the Consent UI
    name: Test Bank

# Configuration for calling the Consent Repository
# See: com.forgerock.sapi.gateway.ob.uk.rcs.cloud.client.configuration.ConsentRepoConfiguration
consent:
  # IDM Consent Repo
  repo:
    # Context to build the URI to make a request against the repository endpoint to obtain the client object by clientId
    contexts_api_client:
      get: /repo/apiclients/@ClientId@
      put: /repo/apiclients/@ClientId@
      patch: /repo/apiclients/@ClientId@
      delete: /repo/apiclients/@ClientId@
    # Context to build the URI to make a request against the repository endpoint to obtain the user object by userId
    contexts_user:
      get: /repo/users/@UserId@
      put: /repo/users/@UserId@
      patch: /repo/users/@UserId@
      delete: /repo/users/@UserId@
    # Context to build the URI to make a request against the repository endpoint to obtain the consent object intentId
    contexts_repo_consent:
      get: /repo/consents/@IntentId@
      put: /repo/consents/@IntentId@
      patch: /repo/consents/@IntentId@
      delete: /repo/consents/@IntentId@

  # RCS Consent Store config
  store:
    enabled:
      # Controls which intentTypes will use the new Consent Store (format: comma separated list)
      intentTypes: ACCOUNT_ACCESS_CONSENT, PAYMENT_DOMESTIC_CONSENT

spring:
  data:
    mongodb:
      database: consent

# Configuration for calling the RS backoffice API
# See: com.forgerock.sapi.gateway.ob.uk.rcs.server.configuration.RsBackofficeConfiguration
rs:
  api:
    backoffice:
      uris:
        accounts:
          # Context endpoint to find accounts user by userId
          findUserById: /backoffice/accounts/search/findByUserId
          # Context endpoint to find account identifier by userId and account identifiers (name, identification and scheme name)
          findByAccountIdentifiers: /backoffice/accounts/search/findByAccountIdentifiers
        domestic-payments:
          # Context endpoint to find payment user by userId
          findUserById: /backoffice/domestic-payments/search/findByUserId
